<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Optical Properties Learning Hub</title>
  <script>
   // ===================== DATA SDK ===================== //

(function () {
  const STORAGE_KEY = "optical_properties_records";

  function load() {
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw ? JSON.parse(raw) : [];
  }

  function save(data) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  window.dataSdk = {
    handler: null,

    async init(handler) {
      this.handler = handler || null;
      const data = load();

      // Notify main script
      if (this.handler && this.handler.onDataChanged) {
        this.handler.onDataChanged(data);
      }

      return { isOk: true };
    },

    getAll() {
      return load();
    },

    async create(record) {
      const data = load();
      data.push(record);

      save(data);

      if (this.handler?.onDataChanged) {
        this.handler.onDataChanged(data);
      }

      return record;
    },

    async update(updatedRecord) {
      const data = load();
      const index = data.findIndex(r => r.section_id === updatedRecord.section_id);

      if (index !== -1) {
        data[index] = updatedRecord;
        save(data);

        if (this.handler?.onDataChanged) {
          this.handler.onDataChanged(data);
        }

        return updatedRecord;
      }

      console.warn("[dataSdk] Tried to update non-existing record", updatedRecord);
      return null;
    }
  };
})();

  </script>
  <script>
   // ===================== ELEMENT SDK ===================== //

(function () {
  let currentConfig = {};
  let initOptions = null;

  function applyConfig() {
    if (initOptions && typeof initOptions.onConfigChange === "function") {
      initOptions.onConfigChange(currentConfig);
    }
  }

  window.elementSdk = {
    init(options) {
      initOptions = options;
      currentConfig = { ...options.defaultConfig };

      // Apply defaults immediately
      applyConfig();

      return Promise.resolve({ ok: true });
    },

    // Update a subset of config values
    setConfig(partialConfig) {
      currentConfig = { ...currentConfig, ...partialConfig };

      // Apply changes
      applyConfig();
    },

    // Return full configuration
    getConfig() {
      return currentConfig;
    }
  };
})();
  </script>
  <link rel="stylesheet" href="style.css">
  <script src="tailwindcss.js" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <header class="header">
    <h1 class="title" id="course-title">Optical Properties</h1>
    <p class="subtitle" id="chapter-info">Chapter 21 - Materials Science and Engineering</p>
    <div class="progress-container">
     <div class="progress-bar" id="progress-bar"></div>
    </div>
    <p class="progress-text" id="progress-text">0 of 14 sections completed</p>
   </header>
   <div class="content-grid">
    <aside class="sidebar">
     <h2 class="sidebar-title">Course Content</h2>
     <ul class="section-list" id="section-list"></ul>
    </aside>
    <main class="main-content">
     <div id="content-area">
      <div class="content-header">
       <h2 class="content-title" id="section-title">Introduction</h2>
       <p class="content-subtitle" id="section-number">Section 21.1</p>
      </div>
      <div class="content-body" id="section-content"></div>
      <div class="action-buttons"><button class="btn btn-success" id="complete-btn">Mark Complete</button> <button class="btn btn-primary" id="quiz-btn">Take Quiz</button>
      </div>
     </div>
     <div class="quiz-container" id="quiz-area">
      <div class="content-header">
       <h2 class="content-title">Section Quiz</h2>
       <p class="content-subtitle">Test your understanding</p>
      </div>
      <div id="quiz-questions"></div><button class="btn btn-primary" id="submit-quiz" style="margin-top: 20px;">Submit Answers</button> <button class="btn btn-success" id="back-to-content" style="margin-top: 20px; display: none;">Back to Content</button>
      <div class="quiz-result" id="quiz-result">
       <p class="quiz-score" id="quiz-score">0%</p>
       <p class="quiz-message" id="quiz-message">Great work!</p>
      </div>
     </div>
    </main>
   </div>
  </div>
  <script src="script.js" type="text/javascript"></script>
 </body>
</html>
